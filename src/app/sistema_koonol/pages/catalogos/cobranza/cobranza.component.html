<div id="cobranza" class="container-fluid">
  <h1 class="title text-center">Cobranza</h1>
  <div class="container">
    <form id="form_articulos" class="m-4">
      <div class="row mt-4">
        <div class="form-group col-md-4">
          <label for="vendedor">Vendedor</label>
          <input type="text" class="form-control" placeholder="vendedor">
        </div>
        <div class="form-group col-md-3">
          <label for="cliente">Cliente</label>
          <input type="text" class="form-control" placeholder="Cliente">
        </div>
        <div class="form-group col-md-2">
          <label for="folio">Folio</label>
          <input type="number" class="form-control" placeholder="Folio">
        </div>
        <div class="col-md-3 mt-1">
          <button type="button" class=" mt-5 btn search-btn">Buscar</button>
        </div>
      </div>
      <!-- Tarjeta (Card) para mostrar los datos de los pedidos -->
      <div class="w-100">
        <div class="row justify-content-center">
          <div class="col-sm-12 col-md-12 col-xl-6 mb-3 mb-sm-0" *ngFor="let pedido of pedidos">
            <div class="card-body  mt-5 orders-placed__order">
              <h3 class="subtitle mb-3"> <b>{{pedido.cliente}}</b> </h3>
              <div class="orders-placed__order__section1--subsection2">
                <p><b>Folio:</b></p><span><b>000{{pedido.folio}}</b></span>
              </div>
              <div class="hijo">
                <span>Status: <b style="color: rgb(97, 187, 8);">{{pedido.status}}</b></span>
              </div>
              <div class="hijo">
                <span>Fecha de entrega: <b>{{pedido.fecha_entrega}}</b></span>
              </div>
              <div class="hijo">
                <span>Fecha de pedido: <b>{{pedido.fecha_pedido}}</b></span>
              </div>
              <div>
                <div class="orders-placed__order__section2--subsection2">
                  <span><b>Productos: </b>{{pedido.num_productos}} </span>
                </div>
                <div class="orders-placed__order__section2--subsection2">
                  <span><b>Peso: {{pedido.peso_producto}} </b></span>
                </div>
                <div class="orders-placed__order__section2--subsection2">
                  <span><b>Total: {{pedido.precio_total | currency: 'MX'}}</b></span>
                </div>
              </div>
              <div class="d-flex mt-5 justify-content-end mb-2 orders-placed__order__section2--subsection1">
                <button class="general-btn" data-toggle="modal" data-target="#pagarModal"
                  (click)="abrirModalPago(pedido)">Pagar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="d-flex justify-content-end mt-4">
        <button type="submit" class="btn general-btn ml-auto">
          Finalizar
        </button>
      </div>

      <!-- modal para Cobranza -->
      <div class="modal fade" id="pagarModal">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
          <div class="modal-content">
            <div class="modal-header text-center">
              <h5 class="title mb-0 text-center" id="editarModalLabel">Calculadora de Pagos</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="row m-3">
              <div class="col">
                <p>Cliente:</p>
                <b>{{pedidoSeleccionado?.cliente}}</b>
              </div>
              <div class="col">
                <p>Folio:</p>
                <span><b>000{{pedidoSeleccionado?.folio}}</b></span>
              </div>
            </div>
            <hr>
            <div class="modal-body">
              <div id="accordion">
                <div class="card">
                  <div class="card-header" id="headingBilletes" data-toggle="collapse" data-target="#collapseBilletes"
                  aria-expanded="true" aria-controls="collapseBilletes">
                    <h6 class="mb-0">
                      <button class="btn btn-link" data-toggle="collapse" data-target="#collapseBilletes"
                        aria-expanded="true" aria-controls="collapseBilletes">
                       Ingresar Billetes
                      </button>
                    </h6>
                  </div>

                  <div id="collapseBilletes" class="collapse show" aria-labelledby="headingBilletes"
                    data-parent="#accordion">
                    <div class="card-body">
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="b1000"><b>$1000</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="b1000"
                            [(ngModel)]="b1000" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="b1000Cambio"
                            [(ngModel)]="b1000Cambio" (input)="calcular()">
                        </div>
                      </div>
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="b500"><b>$500</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="b500"
                            [(ngModel)]="b500" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="b500Cambio"
                            [(ngModel)]="b500Cambio" (input)="calcular()">
                        </div>
                      </div>
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="b200"><b>$200</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="b200"
                            [(ngModel)]="b200" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="b200Cambio"
                            [(ngModel)]="b200Cambio" (input)="calcular()">
                        </div>
                      </div>
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="b100"><b>$100</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="b100"
                            [(ngModel)]="b100" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="b100Cambio"
                            [(ngModel)]="b100Cambio" (input)="calcular()">
                        </div>
                      </div>
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="b50"><b>$50</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="b50"
                            [(ngModel)]="b50" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="b50Cambio"
                            [(ngModel)]="b50Cambio" (input)="calcular()">
                        </div>
                      </div>
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="b20"><b>$20</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="b20"
                            [(ngModel)]="b20" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="b20Cambio"
                            [(ngModel)]="b20Cambio" (input)="calcular()">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- SecciÃ³n de Monedas -->
                <div class="card">
                  <div class="card-header" id="headingMonedas">
                    <h6 class="mb-0">
                      <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseMonedas"
                        aria-expanded="false" aria-controls="collapseMonedas">
                        Ingresar Monedas
                      </button>
                    </h6>
                  </div>
                  <div id="collapseMonedas" class="collapse" aria-labelledby="headingMonedas" data-parent="#accordion">
                    <div class="card-body">
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="m10"><b>$10</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="m10"
                            [(ngModel)]="m10" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="m10Cambio"
                            [(ngModel)]="m10Cambio" (input)="calcular()">
                        </div>
                      </div>
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="m5"><b>$5</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="m5"
                            [(ngModel)]="m5" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="m5Cambio"
                            [(ngModel)]="m5Cambio" (input)="calcular()">
                        </div>
                      </div>
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="m2"><b>$2</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="m2"
                            [(ngModel)]="m2" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="m2Cambio"
                            [(ngModel)]="m2Cambio" (input)="calcular()">
                        </div>
                      </div>
                      <div class="row m-1">
                        <div class="col-3">
                          <span for="m1"><b>$1</b></span>
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Ingreso" name="m1"
                            [(ngModel)]="m1" (input)="calcular()">
                        </div>
                        <div class="col-4">
                          <input type="number" class="form-control small-input" placeholder="Cambio" name="m1Cambio"
                            [(ngModel)]="m1Cambio" (input)="calcular()">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--Totales-->
            <div class="row m-1">
              <div class="col-sm-6">
                <label for="totalIngresos">Total: </label>
                <span style="font-size:1.5rem;"> {{pedidoSeleccionado?.precio_total | currency: 'MX'}}</span>
              </div>
              <div class="col-sm-6">
                <label for="totalIngresos"><b>Ingresos</b></label>
                <input type="number" class="form-control" id="totalIngresos" name="totalIngresos"
                  [(ngModel)]="totalIngresosReal" readonly>
              </div>
              <div class="col-sm-6">
                <label for="totalCambio"><b>Cambio</b></label>
                <input type="number" class="form-control" id="totalCambio" name="totalCambio" [(ngModel)]="totalCambio"
                  readonly>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="search-btn" data-dismiss="modal">Cerrar</button>
              <button type="button" class="general-btn">Pagar</button>
            </div>
          </div>
        </div>
      </div>



    </form>
  </div>
</div>
