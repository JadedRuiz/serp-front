<div class="p-2 shadow container">

  <!-- FORMULARIO -->
  <form class="form-group"
  #productForm="ngForm"
  (ngSubmit)="guardarArticulo(productForm)"
  >
    <div class="row">
      <h1 class="title text-center">Nuevo Producto</h1>
      <div class="col-md-6">
        <div class="row">

        <div class="form-label col-md-4">
          <label class="label-label" for="inputAlmacen">Almacen</label>
          <select  type="text"
          class="form-control"
          title="alamacen"
          name="alamacen"
          placeholder="..."
          [(ngModel)]="item.id_almacen" >
          <option name="alamcen" value={{almacen.id_almacen}} *ngFor="let almacen of almacenes"
          >{{almacen.almacen}}
          </option>
          </select>
        </div>

            </div>
      <div class="row">
        <div class="form-label col-md-4">
          <label for="inputNombre">Nombre</label>
          <input
            type="text"
            class="form-control"
            name="articulo"
            id="inputNombre"
            required
            placeholder="..."
            [(ngModel)]="item.articulo"
          />
        </div>

        <div class="form-label col-md-4">
          <label class="label-label" for="inputFamilia">Familia</label>
          <select  type="text"
          class="form-control"
          title="familia"
          name="familia"
          placeholder="..."
          [(ngModel)]="item.id_familia" >
          <option name="familia" value={{familia.id_familia}} *ngFor="let familia of familias"
          >{{familia.familia}}
          </option>
          </select>
        </div>
      </div>

      <div class="form-label col-md-4">
        <label class="label-label" for="inputFamilia">Medidas</label>
        <select  type="text"
        class="form-control"
        title="medida"
        name="medida"
        placeholder="..."
        [(ngModel)]="item.id_medida" >
        <option name="medida" value={{medida.id_medida}} *ngFor="let medida of medidas"
        >{{medida.medida}}
        </option>
        </select>
      </div>

        <div class="row">
        <div class="form-label col-md-3">
          <label for="inputPrecio">Precio venta</label>
          <input
            type="number"
            class="form-control"
            name="precio_venta"
            id="inputPrecio"
            placeholder="..."
            required
            [(ngModel)]="item.precio_venta"
            (change)="calcularPrecioMasIva()"
          />
        </div>
        <div class=" text-center form-label col-md-2">
          <label  for="inputFamilia">IVA</label>
          <input
            type="numero"
            name="IVA"
            class="form-control"
            id="inputFamilia"
            placeholder="p.ej: 16%"
            required
            [(ngModel)]="item.tasa_iva"
            (change)="calcularPrecioMasIva()"
          />
        </div>
        <div class="form-label col-md-3 text-center">
          <label><b>Precio final</b></label>
        <span>{{precioMasIva | number:'1.2-2'}}</span>

      </div>
        <div class="row">
        <h1 class="">Descuentos</h1>
          <div class="form-label col-md-2">
            <label for="inputFamilia">1</label>
            <input
              type="numero"
              name="descuento1"
              class="form-control"
              id="inputFamilia"
              placeholder="..."
              required
              [(ngModel)]="item.descuento1"
            (change)="calcularPrecioMasIva()"
            />
          </div>
          <div class="form-label col-md-2">
            <label for="inputFamilia">2</label>
            <input
              type="text"
              class="form-control"
              id="inputFamilia"
              name="descuento2"
              placeholder="..."
              [(ngModel)]="item.descuento2"
            (change)="calcularPrecioMasIva()"
            />
          </div>
          <div class="form-label col-md-2">
            <label for="inputFamilia">3</label>
            <input
              type="text"
              class="form-control"
              name="descuento3"
              id="inputFamilia"
              placeholder="..."
              [(ngModel)]="item.descuento3"
            (change)="calcularPrecioMasIva()"
            />
          </div>
        </div>
      </div>

      <div class="row ">
        <h5 class="fs-5 mt-2 ">Existencias</h5>
        <div class="col-md-3 form-label">
          <label for="inputFamilia">Minimo</label>
          <input
            type="text"
            class="form-control"
            id="inputFamilia"
            placeholder="..."
          />
        </div>
        <div class="col-md-3 form-label">
          <label for="inputFamilia">Maximo</label>
          <input
            type="text"
            class="form-control"
            id="inputFamilia"
            placeholder="..."
          />
        </div>
        <div class="col-md-3 form-label">
          <label for="inputFamilia">Reorden</label>
          <input
            type="text"
            class="form-control"
            id="inputFamilia"
            placeholder="..."
          />
        </div>

        </div>
      </div>
    </div>
    <button type="submit" class="m-2 btn search-btn">Guardar</button>
  </form>


<!-- BOTONES -->
<div class="2">
  <button
    class="m-2 btn general-btn"
    (click)="uploadAndResize()"
    [disabled]="imageCount >= 5"
  >
    Subir imagen
  </button>
  <button type="button" class="m-2 btn danger-btn" [routerLink]="['/home']">Cancelar</button>

</div>

<div class="row">
  <div class="col">
     <!-- IMAGENES -->
  <div class="col-6 d-flex flex-column align-items-center justify-content-center">
    <div *ngIf="uploadedImages.length > 0" class="text-center mp-3">
      <img
        class="img-fluid"
        [src]="uploadedImages[uploadedImages.length -1]"
        alt="Imagen comprimida"
        [style.width.px]="250"
        [style.height.px]="250"
      />
    </div>

  <!-- MINIATURAS -->
  <div class="d-flex flex-wrap justify-content-center mt-2">
    <div *ngFor="let image of uploadedImages; let i = index" class="mr-2 mb-2" >
      <img
      style="cursor: pointer;"
        class="img-thumbnail"
        [src]="image"
        alt="miniatura"
        [style.width.px]="55"
        [style.height.px]="55"
        (click)="displayImage(i)"
      />
    </div>
  </div>



  </div>
</div>
</div>
