<app-orders-cart (toggleModalVisibility)="toggleModalVisibility()"></app-orders-cart>
<app-orders-cart-modal *ngIf="modalVisibility"
  (toggleModalVisibility)="toggleModalVisibility()"></app-orders-cart-modal>


<!-- Buscador -->
<h1 class="mb-2 title text-center m-4">PRODUCTOS</h1>
<div class="search-bar" [class.sticky]="isSticky" [class.active]="isSticky">
  <input type="text" class="search-input" placeholder="Productos" [(ngModel)]="searchTitle">
  <input type="text" class="search-input" placeholder="Familia" [(ngModel)]="searchFam">
  <button type="button" class="b search-btn" (click)="buscar()">BUSCAR</button>
  <button type="button" class="b add-btn" (click)="addProducto()">AGREGAR</button>
</div>

<div class="text-center" *ngIf="noResults" style="  color:red; font-size: 40px;">No se encontraron resultados.</div>
<hr />


<div class="container-fluid">
  <div class="columns is-multiline is-variable is-4">
    <div class="column is-one-quarter-desktop is-one-third-tablet is-full-mobile" *ngFor="let articulo of articulos">

        <div class="card">
        <a type="button" class="mt-1 me-1 align-self-end btn_h " (click)="agregarProductoCarrito(item)">+</a>
            <img src="https://via.placeholder.com/300" alt="Producto">
        <div class="card-content">
          <div class="media">
            <div class="media-content">
              <h1 class="title mb-1">{{ articulo.articulo }}</h1>
              <h2 class="subtitle mb-0 mt-1">{{ articulo.familia}}</h2>
              <span class="mb-0"><b> 10 / 20 / 30</b></span>
              <br>
              <span><b>Unidad</b>  {{articulo.medida}}</span>
            </div>
          </div>
          <a class="" (click)="openModal(articulo)" style="color: var(--color-terciario)">Ver Detalles</a>
          <span class="card-price ms-4"><strong>{{ articulo.precio_venta  | currency: 'MEX'}}</strong></span>
        </div>
      </div>
  </div>

</div>


<!-- Modal -->
<div class="modal" [class.is-active]="isModalOpen">
  <div class="modal-background"></div>
  <div class="modal-content" *ngIf="selectedCard">
    <div class="box">
      <div class="media">
        <div class="media-left">
          <figure class="image ">
            <img src="https://via.placeholder.com/200" alt="Producto">
          </figure>
        </div>
        <div class="media-content">
          <span>Nombre: </span>
          <p class="title">{{ selectedCard.articulo }}</p>
          <p class="fam"> Familia: <b>{{ selectedCard.familia }}</b></p>
          <p>Price: <b>{{ selectedCard.precio_venta | currency: 'MEX' }}</b></p>
        </div>
        <button class=" btn general-btn" type="submit">EDITAR</button>
      </div>
      <table class="table is-bordered is-fullwidth">
        <thead>
          <tr>
            <th>Almacen</th>
            <th>Ubicacion</th>
            <th>Precio</th>
            <th>Unidad</th>
            <th>Descuento</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Norte</td>
            <td>Ubicacion 1</td>
            <td>$10.00</td>
            <td>costal (20kg)</td>
            <td>15%</td>
          </tr>
          <tr>
            <td>SurEste</td>
            <td>Ubicacion 2</td>
            <td>$15.00</td>
            <td>kg</td>
            <td>20%</td>
          </tr>
          <!--Argegar filas -->
        </tbody>
      </table>
    </div>
  </div>
  <button class="modal-close is-large" aria-label="close" (click)="closeModal()"></button>
</div>






<!-- Logica para la animaciÃ³n de la barra de busqueda -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(window).scroll(function () {
    var scrollTop = $(window).scrollTop();
    var searchBar = $('.search-bar');

    if (scrollTop > 0) {
      searchBar.addClass('sticky');
    } else {
      searchBar.removeClass('sticky');
    }
  });
</script>
